{
  "version": "2.0",
  "state": "running",
  "current": {
    "module": "install",
    "job": "job_1",
    "status": "RUNNING",
    "start_time": "2026-02-22T15:10:48Z",
    "completed_at": "2026-02-22T12:10:00Z"
  },
  "session": {
    "start_time": "2026-02-21T16:13:36Z",
    "last_update": "2026-02-22T15:10:48Z",
    "total_loops": 33
  },
  "modules": {
    "cli": {
      "status": "completed",
      "jobs": {
        "job_1": {
          "status": "COMPLETED",
          "loop_count": 3,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 5,
          "debug_logs": [],
          "started_at": "2026-02-21T16:13:39Z",
          "completed_at": "2026-02-22T01:05:00Z",
          "tasks": {
            "task_1": {
              "description": "创建 `morty` 主命令脚本",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T00:28:00Z"
            },
            "task_2": {
              "description": "实现 `cli_register_command()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T00:45:00Z"
            },
            "task_3": {
              "description": "实现 `cli_parse_args()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T00:48:00Z"
            },
            "task_4": {
              "description": "实现 `cli_route()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T01:00:00Z"
            },
            "task_5": {
              "description": "实现 `cli_execute()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T01:05:00Z"
            }
          }
        },
        "job_2": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 10,
          "tasks_completed": 10,
          "debug_logs": [],
          "started_at": "2026-02-21T16:41:06Z",
          "completed_at": "2026-02-21T16:41:51Z"
        },
        "job_3": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 7,
          "tasks_completed": 7,
          "debug_logs": [],
          "started_at": "2026-02-21T16:41:52Z",
          "completed_at": "2026-02-21T16:42:21Z"
        },
        "job_4": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 3,
          "tasks_completed": 3,
          "debug_logs": [],
          "started_at": "2026-02-21T16:42:22Z",
          "completed_at": "2026-02-21T16:42:33Z"
        },
        "job_5": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 3,
          "tasks_completed": 3,
          "debug_logs": [],
          "started_at": "2026-02-21T16:42:34Z",
          "completed_at": "2026-02-21T16:42:44Z"
        }
      }
    },
    "config": {
      "status": "pending",
      "jobs": {
        "job_1": {
          "status": "RUNNING",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 6,
          "tasks_completed": 2,
          "debug_logs": [],
          "started_at": "2026-02-21T16:42:45Z"
        },
        "job_2": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 4,
          "tasks_completed": 5,
          "debug_logs": [],
          "started_at": "2026-02-21T18:06:30Z",
          "completed_at": "2026-02-21T18:12:36Z",
          "tasks": {
            "task_1": {
              "description": "实现 `config_check_work_dir()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T01:10:00Z"
            },
            "task_2": {
              "description": "实现 `config_init_work_dir()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T01:10:01Z"
            },
            "task_3": {
              "description": "实现 `config_ensure_work_dir()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:11:00Z"
            },
            "task_4": {
              "description": "实现子目录自动创建（logs, research, plan）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:11:00Z"
            }
          }
        },
        "job_3": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T18:12:37Z",
          "completed_at": "2026-02-21T18:14:51Z",
          "tasks": {
            "task_1": {
              "description": "实现 `config_check_research_exists()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:13:00Z"
            },
            "task_2": {
              "description": "实现 `config_check_plan_done()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:13:00Z"
            },
            "task_3": {
              "description": "实现 `config_require_plan()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:13:00Z"
            },
            "task_4": {
              "description": "实现 `config_load_research_facts()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:13:00Z"
            },
            "task_5": {
              "description": "定义前置条件检查的错误提示信息",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:13:00Z"
            }
          }
        }
      }
    },
    "doing": {
      "status": "completed",
      "jobs": {
        "job_1": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T18:14:52Z",
          "completed_at": "2026-02-21T18:25:02Z",
          "tasks": {
            "task_1": {
              "description": "创建 `morty_doing.sh` 脚本",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:20:00Z"
            },
            "task_2": {
              "description": "实现 `doing_parse_args()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:21:00Z"
            },
            "task_3": {
              "description": "实现 `doing_load_status()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:22:00Z"
            },
            "task_4": {
              "description": "实现 `doing_select_job()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:30:00Z"
            },
            "task_5": {
              "description": "实现 `doing_reset_status()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:35:00Z"
            }
          }
        },
        "job_2": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T18:25:03Z",
          "tasks": {
            "task_1": {
              "description": "实现 `doing_execute_job()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T10:30:00Z"
            },
            "task_2": {
              "description": "构建执行提示词",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T10:31:00Z"
            },
            "task_3": {
              "description": "调用 ai_cli 后台执行",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T10:32:00Z"
            },
            "task_4": {
              "description": "捕获执行结果（通过日志或输出文件）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T10:33:00Z"
            },
            "task_5": {
              "description": "解析执行结果，更新状态",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T10:34:00Z"
            }
          },
          "completed_at": "2026-02-21T18:36:02Z"
        },
        "job_3": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 4,
          "tasks_completed": 5,
          "debug_logs": [],
          "started_at": "2026-02-21T18:36:03Z",
          "completed_at": "2026-02-21T18:41:14Z",
          "tasks": {
            "task_1": {
              "description": "创建 `prompts/doing.md` 系统提示词",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T10:40:00Z"
            },
            "task_2": {
              "description": "实现 `doing_build_prompt()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T10:42:00Z"
            },
            "task_3": {
              "description": "实现 `doing_load_plan_context()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T10:43:00Z"
            },
            "task_4": {
              "description": "实现 `doing_save_prompt_to_file()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T10:45:00Z"
            }
          }
        },
        "job_4": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T18:41:15Z",
          "completed_at": "2026-02-21T18:49:58Z",
          "tasks": {
            "task_1": {
              "description": "实现状态转换逻辑",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:49:00Z"
            },
            "task_2": {
              "description": "实现失败重试机制（最多 3 次）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:49:00Z"
            },
            "task_3": {
              "description": "实现 `doing_mark_completed()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:49:00Z"
            },
            "task_4": {
              "description": "实现 `doing_mark_failed()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:49:00Z"
            },
            "task_5": {
              "description": "实现中断恢复逻辑",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T02:49:00Z"
            }
          }
        },
        "job_5": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 4,
          "tasks_completed": 5,
          "debug_logs": [],
          "started_at": "2026-02-21T18:49:59Z",
          "completed_at": "2026-02-21T18:55:51Z",
          "tasks": {
            "task_1": {
              "description": "集成 `version_create_loop_commit()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T00:00:00Z"
            },
            "task_2": {
              "description": "生成提交信息（包含 Job 名称、状态、变更摘要）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T00:00:00Z"
            },
            "task_3": {
              "description": "实现提交前的变更检测",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T00:00:00Z"
            },
            "task_4": {
              "description": "处理提交失败情况",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T00:00:00Z"
            }
          }
        },
        "job_6": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T18:55:52Z",
          "completed_at": "2026-02-21T19:07:31Z",
          "tasks": {
            "task_1": {
              "description": "修改 ai_cli 调用添加 --output-format json 参数",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T11:30:00Z"
            },
            "task_2": {
              "description": "修改 RALPH_STATUS 解析使用 jq 解析 JSON",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T11:45:00Z"
            },
            "task_3": {
              "description": "添加 JSON 解析失败回退到文本解析的逻辑",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T11:50:00Z"
            },
            "task_4": {
              "description": "更新 prompts/doing.md 中的 RALPH_STATUS 格式",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T11:55:00Z"
            },
            "task_5": {
              "description": "验证所有更改并创建测试",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:00:00Z"
            }
          }
        },
        "job_7": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 4,
          "tasks_completed": 5,
          "debug_logs": [],
          "started_at": "2026-02-21T19:07:32Z",
          "completed_at": "2026-02-21T19:12:18Z",
          "tasks": {
            "task_1": {
              "description": "实现 doing_build_compact_context() 函数",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:15:00Z"
            },
            "task_2": {
              "description": "更新 doing_build_prompt() 使用精简上下文",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:20:00Z"
            },
            "task_3": {
              "description": "更新 prompts/doing.md 中的示例",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:25:00Z"
            },
            "task_4": {
              "description": "验证精简上下文生成和解析",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:30:00Z"
            }
          }
        }
      }
    },
    "logging": {
      "status": "running",
      "jobs": {
        "job_1": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T19:12:19Z",
          "completed_at": "2026-02-21T19:28:42Z",
          "tasks": {
            "task_1": {
              "description": "创建 `lib/logging.sh` 日志管理模块",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:10:00Z"
            },
            "task_2": {
              "description": "实现 `log()` 核心函数，支持级别过滤",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:10:00Z"
            },
            "task_3": {
              "description": "实现日志文件写入和自动创建目录",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:10:00Z"
            },
            "task_4": {
              "description": "实现日志级别快捷方法（log_info, log_warn 等）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:10:00Z"
            },
            "task_5": {
              "description": "实现日志格式化和时间戳",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:10:00Z"
            }
          }
        },
        "job_2": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T19:28:43Z",
          "completed_at": "2026-02-21T19:36:35Z",
          "tasks": {
            "task_1": {
              "description": "实现日志文件大小检查",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:30:00Z"
            },
            "task_2": {
              "description": "实现日志轮转（当前日志 -> morty.log.1 -> morty.log.2）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:30:00Z"
            },
            "task_3": {
              "description": "实现最大保留文件数限制",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:30:00Z"
            },
            "task_4": {
              "description": "支持按日期归档（可选）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:35:00Z"
            },
            "task_5": {
              "description": "实现日志压缩（对旧日志）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:30:00Z"
            }
          }
        },
        "job_3": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T19:36:36Z",
          "completed_at": "2026-02-21T19:40:27Z",
          "tasks": {
            "task_1": {
              "description": "实现 `log_job_start(module, job)` 创建 Job 日志上下文",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:38:00Z"
            },
            "task_2": {
              "description": "实现 `log_job_end()` 关闭 Job 日志上下文",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:38:00Z"
            },
            "task_3": {
              "description": "实现 `log_job(message)` 写入 Job 独立日志",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:38:00Z"
            },
            "task_4": {
              "description": "在 Job 日志中自动记录开始时间、结束时间、执行时长",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:38:00Z"
            },
            "task_5": {
              "description": "支持 Job 日志与主日志同时写入",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:38:00Z"
            }
          }
        },
        "job_4": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T19:40:27Z",
          "completed_at": "2026-02-21T19:46:55Z",
          "tasks": {
            "task_1": {
              "description": "实现 JSON 格式日志输出",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:43:00Z"
            },
            "task_2": {
              "description": "支持上下文数据自动序列化为 JSON 字段",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:43:00Z"
            },
            "task_3": {
              "description": "添加 `log_structured()` 函数用于机器可读日志",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:43:00Z"
            },
            "task_4": {
              "description": "实现日志格式切换（文本/JSON）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:43:00Z"
            },
            "task_5": {
              "description": "确保特殊字符正确转义",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:43:00Z"
            }
          }
        }
      }
    },
    "plan": {
      "status": "completed",
      "jobs": {
        "job_1": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 7,
          "tasks_completed": 8,
          "debug_logs": [],
          "started_at": "2026-02-21T19:46:56Z",
          "completed_at": "2026-02-21T19:50:57Z",
          "tasks": {
            "task_1": {
              "description": "创建 `morty_plan.sh` 脚本",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:48:00Z"
            },
            "task_2": {
              "description": "读取 `prompts/plan.md` 作为系统提示词",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:48:00Z"
            },
            "task_3": {
              "description": "从 config 获取 ai_cli 命令",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:48:00Z"
            },
            "task_4": {
              "description": "构建 Claude 命令参数",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:48:00Z"
            },
            "task_5": {
              "description": "以 Plan 模式调用 ai_cli",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:48:00Z"
            },
            "task_6": {
              "description": "创建 `.morty/plan/` 目录",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:48:00Z"
            },
            "task_7": {
              "description": "验证输出目录是否生成内容",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:48:00Z"
            }
          }
        }
      }
    },
    "research": {
      "status": "running",
      "jobs": {
        "job_1": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 7,
          "tasks_completed": 8,
          "debug_logs": [],
          "started_at": "2026-02-21T19:50:58Z",
          "completed_at": "2026-02-21T19:58:58Z",
          "tasks": {
            "task_1": {
              "description": "创建 `morty_research.sh` 脚本",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:51:00Z"
            },
            "task_2": {
              "description": "读取 `prompts/research.md` 作为系统提示词",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T03:51:00Z"
            },
            "task_3": {
              "description": "从 config 获取 ai_cli 命令：AI_CLI=$(config_get \"cli.command\" \"claude\")",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T11:50:00Z"
            },
            "task_4": {
              "description": "构建 Claude 命令参数",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T11:55:00Z"
            },
            "task_5": {
              "description": "以 Plan 模式调用：$AI_CLI --permission-mode plan -p \"$PROMPT\"",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T11:55:00Z"
            },
            "task_6": {
              "description": "创建 `.morty/research/` 目录",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T11:55:00Z"
            },
            "task_7": {
              "description": "验证输出目录是否生成内容",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T11:55:00Z"
            }
          }
        }
      }
    },
    "version_manager": {
      "status": "completed",
      "jobs": {
        "job_1": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T19:58:59Z",
          "completed_at": "2026-02-21T20:04:56Z",
          "tasks": {
            "task_1": {
              "description": "创建 `lib/version_manager.sh` 模块",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:02:00Z"
            },
            "task_2": {
              "description": "实现 `version_init_if_needed()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:02:00Z"
            },
            "task_3": {
              "description": "实现 `version_has_uncommitted_changes()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:02:00Z"
            },
            "task_4": {
              "description": "实现 `version_get_repo_root()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:02:00Z"
            },
            "task_5": {
              "description": "实现 `version_is_ignored(path)`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:02:00Z"
            }
          }
        },
        "job_2": {
          "status": "COMPLETED",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T20:04:56Z",
          "completed_at": "2026-02-21T20:13:15Z",
          "tasks": {
            "task_1": {
              "description": "实现 `version_create_loop_commit()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:05:00Z"
            },
            "task_2": {
              "description": "实现提交信息生成器（包含循环编号、状态、变更统计）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:06:00Z"
            },
            "task_3": {
              "description": "实现自动暂存变更（受 gitignore 限制）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:07:00Z"
            },
            "task_4": {
              "description": "实现提交前的变更检查（无变更则不提交）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:08:00Z"
            },
            "task_5": {
              "description": "实现 `version_get_current_loop_number()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T04:09:00Z"
            }
          }
        },
        "job_3": {
          "status": "COMPLETED",
          "loop_count": 2,
          "retry_count": 0,
          "tasks_total": 5,
          "tasks_completed": 6,
          "debug_logs": [],
          "started_at": "2026-02-21T20:13:15Z",
          "completed_at": "2026-02-21T20:20:12Z",
          "tasks": {
            "task_1": {
              "description": "实现 `version_reset_to_commit()`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:00:00Z"
            },
            "task_2": {
              "description": "实现 `version_show_loop_history(n)`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:05:00Z"
            },
            "task_3": {
              "description": "实现 `version_get_loop_by_number(n)`",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:10:00Z"
            },
            "task_4": {
              "description": "实现回滚前自动创建备份分支",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:02:00Z"
            },
            "task_5": {
              "description": "实现 `.morty/logs/` 目录保护（回滚时不删除）",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T12:04:00Z"
            }
          }
        }
      }
    },
    "install": {
      "status": "pending",
      "jobs": {
        "job_1": {
          "status": "RUNNING",
          "loop_count": 1,
          "retry_count": 0,
          "tasks_total": 6,
          "tasks_completed": 1,
          "debug_logs": [],
          "tasks": {
            "task_1": {
              "description": "创建 `lib/install.sh` 模块",
              "status": "COMPLETED",
              "completed_at": "2026-02-22T15:15:00Z"
            },
            "task_2": {
              "description": "实现 `install_check_deps()`: 检查所有必需依赖",
              "status": "PENDING"
            },
            "task_3": {
              "description": "实现 `install_check_bash_version()`: 验证 Bash >= 4.0",
              "status": "PENDING"
            },
            "task_4": {
              "description": "实现 `install_check_git_version()`: 验证 Git >= 2.0",
              "status": "PENDING"
            },
            "task_5": {
              "description": "实现 `install_check_ai_cli()`: 检查 Claude Code CLI",
              "status": "PENDING"
            },
            "task_6": {
              "description": "实现友好的缺失依赖提示和安装指导",
              "status": "PENDING"
            }
          },
          "started_at": "2026-02-22T15:10:48Z"
        },
        "job_2": {
          "status": "PENDING",
          "loop_count": 0,
          "retry_count": 0,
          "tasks_total": 6,
          "tasks_completed": 0,
          "debug_logs": [],
          "tasks": {
            "task_1": {
              "description": "实现 `install_get_default_prefix()`: 获取默认安装路径",
              "status": "PENDING"
            },
            "task_2": {
              "description": "实现 `install_validate_prefix()`: 验证安装路径有效",
              "status": "PENDING"
            },
            "task_3": {
              "description": "实现 `install_check_existing()`: 检查现有安装",
              "status": "PENDING"
            },
            "task_4": {
              "description": "实现 `install_ensure_dirs()`: 创建必要的目录结构",
              "status": "PENDING"
            },
            "task_5": {
              "description": "实现 PATH 检查，提示用户添加 PATH",
              "status": "PENDING"
            },
            "task_6": {
              "description": "处理已存在安装时的冲突（备份、覆盖、取消）",
              "status": "PENDING"
            }
          }
        },
        "job_3": {
          "status": "PENDING",
          "loop_count": 0,
          "retry_count": 0,
          "tasks_total": 6,
          "tasks_completed": 0,
          "debug_logs": [],
          "tasks": {
            "task_1": {
              "description": "实现 `install_copy_files()`: 复制所有必要文件到目标路径",
              "status": "PENDING"
            },
            "task_2": {
              "description": "实现 `install_create_symlink()`: 创建命令符号链接",
              "status": "PENDING"
            },
            "task_3": {
              "description": "实现 `install_set_permissions()`: 设置文件权限",
              "status": "PENDING"
            },
            "task_4": {
              "description": "实现 `install_write_version()`: 写入版本文件",
              "status": "PENDING"
            },
            "task_5": {
              "description": "实现 `install_init_config()`: 初始化默认配置",
              "status": "PENDING"
            },
            "task_6": {
              "description": "更新 install.sh 调用 install 模块",
              "status": "PENDING"
            }
          }
        },
        "job_4": {
          "status": "PENDING",
          "loop_count": 0,
          "retry_count": 0,
          "tasks_total": 6,
          "tasks_completed": 0,
          "debug_logs": [],
          "tasks": {
            "task_1": {
              "description": "实现 `install_backup_config()`: 备份现有配置",
              "status": "PENDING"
            },
            "task_2": {
              "description": "实现 `install_restore_config()`: 恢复用户配置",
              "status": "PENDING"
            },
            "task_3": {
              "description": "实现 `install_migrate_config()`: 配置版本迁移",
              "status": "PENDING"
            },
            "task_4": {
              "description": "实现 `install_check_update()`: 检查远程更新",
              "status": "PENDING"
            },
            "task_5": {
              "description": "实现 `install_get_latest_version()`: 获取最新版本",
              "status": "PENDING"
            },
            "task_6": {
              "description": "实现 `install_compare_versions()`: 版本号比较",
              "status": "PENDING"
            }
          }
        },
        "job_5": {
          "status": "PENDING",
          "loop_count": 0,
          "retry_count": 0,
          "tasks_total": 6,
          "tasks_completed": 0,
          "debug_logs": [],
          "tasks": {
            "task_1": {
              "description": "实现 `install_uninstall()`: 执行卸载",
              "status": "PENDING"
            },
            "task_2": {
              "description": "实现 `install_remove_files()`: 删除安装文件",
              "status": "PENDING"
            },
            "task_3": {
              "description": "实现 `install_remove_symlink()`: 删除符号链接",
              "status": "PENDING"
            },
            "task_4": {
              "description": "实现 `--purge` 模式，删除配置和数据",
              "status": "PENDING"
            },
            "task_5": {
              "description": "实现卸载确认提示",
              "status": "PENDING"
            },
            "task_6": {
              "description": "实现卸载后的清理检查",
              "status": "PENDING"
            }
          }
        },
        "job_6": {
          "status": "PENDING",
          "loop_count": 0,
          "retry_count": 0,
          "tasks_total": 7,
          "tasks_completed": 0,
          "debug_logs": [],
          "tasks": {
            "task_1": {
              "description": "实现 `install_get_version()`: 获取当前安装版本",
              "status": "PENDING"
            },
            "task_2": {
              "description": "实现 `install_get_full_version()`: 获取详细版本信息",
              "status": "PENDING"
            },
            "task_3": {
              "description": "实现 `install_check_update()`: 检查是否有新版本",
              "status": "PENDING"
            },
            "task_4": {
              "description": "集成到 `morty version` 命令",
              "status": "PENDING"
            },
            "task_5": {
              "description": "集成到 `morty upgrade --check` 命令",
              "status": "PENDING"
            },
            "task_6": {
              "description": "添加版本兼容性检查",
              "status": "PENDING"
            },
            "task_7": {
              "description": "添加隔离环境健康检查",
              "status": "PENDING"
            }
          }
        }
      }
    }
  },
  "summary": {
    "total_modules": 8,
    "completed_modules": 4,
    "running_modules": 2,
    "pending_modules": 2,
    "blocked_modules": 0,
    "total_jobs": 31,
    "completed_jobs": 23,
    "running_jobs": 1,
    "failed_jobs": 0,
    "blocked_jobs": 0,
    "progress_percentage": 74
  }
}
