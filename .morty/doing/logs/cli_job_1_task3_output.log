Task 3 已完成。以下是本次执行的摘要：

## 执行摘要

### 完成的任务

1. **创建 `lib/cli_parse_args.sh`** - 参数解析库
   - 支持长选项 (`--option value`, `--option=value`)
   - 支持短选项 (`-a value`, `-abc`)
   - 提供辅助函数：`cli_has_option()`, `cli_get_option_value()`, `cli_get_positional_arg()` 等

2. **创建 `lib/cli_register_command.sh`** - 命令注册库
   - `cli_register_command()` - 注册命令
   - `cli_is_command_registered()` - 检查命令是否注册
   - `cli_get_handler()`, `cli_get_description()`, `cli_get_options()` - 获取命令信息

3. **创建 `lib/cli_route.sh`** - 命令路由库
   - `cli_route()` - 路由命令到对应的处理函数

4. **创建 `lib/cli_execute.sh`** - 命令执行库
   - `cli_execute()` - 执行命令
   - `cli_execute_capture()` - 执行并捕获输出

5. **更新主脚本** - 加载库文件并修复变量名引用

### 验证结果

- ✅ 18 个单元测试全部通过
- ✅ `morty help` 显示所有命令
- ✅ `morty help doing` 显示详细帮助
- ✅ `morty version` 工作正常
- ✅ 未知命令返回 exit code 2

### 创建的文件

```
lib/
├── cli_parse_args.sh
├── cli_register_command.sh
├── cli_route.sh
└── cli_execute.sh

test_cli_parse_args.sh
```

<!-- RALPH_STATUS -->
{
  "module": "cli",
  "job": "job_1",
  "status": "RUNNING",
  "tasks_completed": 3,
  "tasks_total": 5,
  "loop_count": 2,
  "debug_issues": 0,
  "summary": "Task 3 完成：实现了 cli_parse_args() 函数，创建了参数解析、命令注册、路由和执行四个库文件，所有18个测试用例通过"
}
<!-- END_RALPH_STATUS -->
